{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "51f8ec65_bb54d27e",
        "filename": "java/com/google/gerrit/server/logging/PerformanceLogger.java",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2024-07-17T10:16:42Z",
      "side": 1,
      "message": "I think the best pattern for this kind of work would be implementing an AutoCloseable interface",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 24
      },
      "revId": "ba71d71c0b517b4e19ba151b29a7e3aac84809ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba95c841_ccca9ffc",
        "filename": "java/com/google/gerrit/server/logging/PerformanceLogger.java",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2024-07-17T10:29:04Z",
      "side": 1,
      "message": "I would like that but the problem is that this is an extension point and that we get the PerformanceLogger instance injected, i.e. we cannot use a try-with-resources block to create and close the instance. Do you see a way to make this work?",
      "parentUuid": "51f8ec65_bb54d27e",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 24
      },
      "revId": "ba71d71c0b517b4e19ba151b29a7e3aac84809ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7742f82_1a705e88",
        "filename": "java/com/google/gerrit/server/logging/PerformanceLogger.java",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2024-07-17T10:31:42Z",
      "side": 1,
      "message": "I java, one interface can extend another, so we could have a \n\n```\npublic interface PerformanceLogger extends AutoCloseable\n```\n\nDo you think that would cause trouble with the ExtensionPoint definition?  (a quick thinking made me think it would not).",
      "parentUuid": "ba95c841_ccca9ffc",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 24
      },
      "revId": "ba71d71c0b517b4e19ba151b29a7e3aac84809ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0be6bd47_6ff42d9f",
        "filename": "java/com/google/gerrit/server/logging/PerformanceLogger.java",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2024-07-17T10:37:29Z",
      "side": 1,
      "message": "Sure we can do that but it would\u0027t change the fact that our plugin framework would instantiate the PerformanceLogger classes without a try-with-resources block, so there is no guaranteed that the PerformanceLogger\u0027s get closed, which is what people would expect from an AutoCloseable. Hence I think using AutoCloseable here would be misleading.",
      "parentUuid": "b7742f82_1a705e88",
      "range": {
        "startLine": 52,
        "startChar": 0,
        "endLine": 56,
        "endChar": 24
      },
      "revId": "ba71d71c0b517b4e19ba151b29a7e3aac84809ab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}