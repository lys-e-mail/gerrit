{
  "comments": [
    {
      "key": {
        "uuid": "4a612689_aad3dc8a",
        "filename": "java/com/google/gerrit/server/permissions/ProjectControl.java",
        "patchSetId": 13
      },
      "lineNbr": 435,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-05-08T20:36:40Z",
      "side": 1,
      "message": "We do need a delegation mechanism for this, we cannot just assume that Europe\u0027s legislation is fine for all the world.\n\nAs a matter of fact, the European users of Gerrit are by far less than the others.\nWe should allow European sites to delegate this to admins, whilst other sites to have it delegated to project owners.\n\nBy default, we should be backward compatible.",
      "range": {
        "startLine": 435,
        "startChar": 17,
        "endLine": 435,
        "endChar": 26
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "782af015_1107267b",
        "filename": "java/com/google/gerrit/server/permissions/ProjectControl.java",
        "patchSetId": 13
      },
      "lineNbr": 435,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-05-08T21:57:03Z",
      "side": 1,
      "message": "Though this change would also improve user\u0027s privacy (even though this change is aimed at the GDPR).\n\nThough project owners could easily do this read-reflog \u003d group ... i guess to regain access.\n\nIn which case how would an admin prevent that? Only enforcing a admin can view reflog rule?",
      "parentUuid": "4a612689_aad3dc8a",
      "range": {
        "startLine": 435,
        "startChar": 17,
        "endLine": 435,
        "endChar": 26
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "070db3bb_7f48c2ab",
        "filename": "java/com/google/gerrit/server/permissions/ProjectControl.java",
        "patchSetId": 13
      },
      "lineNbr": 435,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-05-09T07:48:29Z",
      "side": 1,
      "message": "\u003e Though this change would also improve user\u0027s privacy (even though this change is aimed at the GDPR).\n\nWe do expose in clear all the accounts’ emails already, still unclear to me how a remote IP (most likely to be a proxy’s IP anyway) could be a security concern comparing to user’s emails.\n\n\u003e \n\u003e Though project owners could easily do this read-reflog \u003d group ... i guess to regain access.\n\u003e \n\u003e In which case how would an admin prevent that? Only enforcing a admin can view reflog rule?\n\nYou can put a block rule that can’t be overridden.",
      "parentUuid": "782af015_1107267b",
      "range": {
        "startLine": 435,
        "startChar": 17,
        "endLine": 435,
        "endChar": 26
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ebb22a73_2ea3bd2d",
        "filename": "java/com/google/gerrit/server/permissions/ProjectControl.java",
        "patchSetId": 13
      },
      "lineNbr": 435,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-05-09T17:45:10Z",
      "side": 1,
      "message": "But users know git stores their email (since git requires a email or at least i think it does). Where as users do not know their ip is being stored so that project owners can view it. Having a IP stored is not needed in git nor is it really necessary.",
      "parentUuid": "070db3bb_7f48c2ab",
      "range": {
        "startLine": 435,
        "startChar": 17,
        "endLine": 435,
        "endChar": 26
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d9aee2e4_e81365c7",
        "filename": "java/com/google/gerrit/server/permissions/ProjectControl.java",
        "patchSetId": 13
      },
      "lineNbr": 435,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-05-09T19:49:18Z",
      "side": 1,
      "message": "\u003e But users know git stores their email (since git requires a email or at least i think it does). Where as users do not know their ip is being stored so that project owners can view it. Having a IP stored is not needed in git nor is it really necessary.\n\nWhich IP? I do not believe there is any GDPR compliance that talks about the reverse-proxy IP. It is the same for all users.\n\nUnless you have your Gerrit server managing the SSL termination, the user\u0027s IP is only traced in the NGINX (or HTTPD) logs. The IP in the reflog is the IP \"seen\" by Gerrit.\n\nP.S. With regards to the user\u0027s e-mail and GDPR, actually there is quite a debate around it. GitHub has the same problem.",
      "parentUuid": "ebb22a73_2ea3bd2d",
      "range": {
        "startLine": 435,
        "startChar": 17,
        "endLine": 435,
        "endChar": 26
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bbebd2a_ac27d71e",
        "filename": "java/com/google/gerrit/server/permissions/ProjectControl.java",
        "patchSetId": 13
      },
      "lineNbr": 435,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2019-05-09T20:00:29Z",
      "side": 1,
      "message": "For example:\n\n{\n  \"old_id\": \"4564d6eab5284a84d15d15ce3869be83d69635d9\",\n  \"new_id\": \"c641538fd9d292b2d5d4cd88dfd40ba90e2c6d64\",\n  \"who\": {\n    \"name\": \"Paladox\",\n    \"email\": \"paladox|account-1665@2a02:c7f:483d:f00:7c7a:e0ec:xxx:xxx\",\n    \"date\": \"2019-05-03 16:41:29.000000000\",\n    \"tz\": 0\n  },\n  \"comment\": \"merged\"\n},\n\n(which is a uk ip and also my ip at the time i did that change)\n\nI crossed out some of it but i can email you if you want the full ip.\n\nAlso we use apache to proxy to gerrit which would be considered ssl termination.",
      "parentUuid": "d9aee2e4_e81365c7",
      "range": {
        "startLine": 435,
        "startChar": 17,
        "endLine": 435,
        "endChar": 26
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eeccaea5_2070f22e",
        "filename": "javatests/com/google/gerrit/acceptance/server/project/ReflogIT.java",
        "patchSetId": 13
      },
      "lineNbr": 91,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-05-08T20:36:40Z",
      "side": 1,
      "message": "We should leave the existing test-case and add another one for GDPR, where the permissions is denied for project owners and allowed for Gerrit admins.",
      "range": {
        "startLine": 91,
        "startChar": 2,
        "endLine": 91,
        "endChar": 46
      },
      "revId": "d369d0e877302292307f8ef6c41eb6d2646eaaf3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}